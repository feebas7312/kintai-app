<%= render "shared/header" %>
<%= render "shared/flash" %>

<%= @employee.number %><br />
<%= @employee.last_name %><br />
<%= @employee.first_name %><br />

<%= form_with model: @new_pattern, url: employee_work_patterns_path(employee_id: @employee.id), local: true do |f| %>
  <% i=0 %>
  <% @new_pattern.collection.each do |pattern| %>
    <%= fields_for 'employee_work_patterns[]', pattern do |field| %>
      <%= field.hidden_field :employee_id, value: @employee.id %>
      <%= field.hidden_field :work_pattern_id, value: @work_patterns[i].id %>
      <% if @employee_work_patterns.find_by(employee_id: @employee.id, work_pattern_id: @work_patterns[i].id) %>
        <%= field.check_box :possibility, {checked: true}, true, false %>
      <% else %>
        <%= field.check_box :possibility, {}, true, false %>
      <% end %>
      <%= @work_patterns[i].start_time %>〜<%= @work_patterns[i].end_time %><br />
    <% end %>
    <% i+=1 %>
  <% end %>
  <%= f.submit "変更" %>
<% end %>

<%= render "shared/footer" %>